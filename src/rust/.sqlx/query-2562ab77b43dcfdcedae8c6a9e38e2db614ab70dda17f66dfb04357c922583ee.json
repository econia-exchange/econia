{
  "db_name": "PostgreSQL",
  "query": "WITH parameters AS (\n    SELECT\n        $1::numeric fill_size,\n        $2::numeric fill_order_id,\n        $3::numeric fill_market_id,\n        $4::timestamptz fill_time)\nUPDATE\n    aggregator.user_history\nSET\n    remaining_size = remaining_size - fill_size,\n    total_filled = total_filled + fill_size,\n    order_status = CASE order_type\n    WHEN 'limit' THEN\n        CASE remaining_size - fill_size\n        WHEN 0 THEN\n            'closed'\n        ELSE\n            order_status\n        END\n    ELSE\n        'closed'\n    END,\n    last_updated_at = fill_time\nFROM\n    parameters\nWHERE\n    order_id = fill_order_id\n    AND market_id = fill_market_id\n",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Numeric",
        "Numeric",
        "Numeric",
        "Timestamptz"
      ]
    },
    "nullable": []
  },
  "hash": "2562ab77b43dcfdcedae8c6a9e38e2db614ab70dda17f66dfb04357c922583ee"
}
